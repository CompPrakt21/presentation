% !TeX spellcheck = en_US
%% Beispiel-Präsentation mit LaTeX Beamer im KIT-Design
%% entsprechend den Gestaltungsrichtlinien vom 1. August 2020
%%
%% Siehe https://sdqweb.ipd.kit.edu/wiki/Dokumentvorlagen

%% Beispiel-Präsentation
\documentclass[en,16:9]{sdqbeamer} 

\usepackage{tikz}
\usetikzlibrary{positioning,calc,arrows}
 
 
%% Titelbild
\titleimage{banner_2020_kit}

%% Gruppenlogo
\grouplogo{} 

%% Gruppenname
\groupname{Compilerpraktikum - Abschlusspräsentation}

% Beginn der Präsentation

\title[]{Compilerpraktikum - Abschlusspräsentation}
\subtitle{Gruppe 5} 
\author[]{Achim Kriso, Marc Huisinga, Erik Kristiansen, Philipp Schaback}

\date[10.\,2.\,2022]{10. Februar 2022}

% Literatur 
 
\usepackage[citestyle=authoryear,bibstyle=numeric,hyperref,backend=biber]{biblatex}
\addbibresource{presentation.bib}
\bibhang1em

\begin{document}

%Titelseite
\KITtitleframe

\begin{frame}{Instruction Selection - Overview}
	% Recap: What types of instruction selections are there. (Macro substitution, BUPM, DAG)
\end{frame}

\begin{frame}{Instruction Selection - Macro Substitution}
\end{frame}

\begin{frame}{Instruction Selection - Tree/DAG Matching}
\end{frame}

\begin{frame}{What we did:}
	\begin{columns}
		\begin{column}{0.5\textwidth}
			\begin{itemize}
				\item Greedy pattern matching on firm graph
				\item Matching on x86 address pattern
				\item $Const + Base + Index * Scale$
			\end{itemize}
		\end{column}
		\begin{column}{0.5\textwidth}
			\begin{figure}
				\centering
				\includegraphics[draft,width=\linewidth,height=5cm]{images/memory-match-firm-graph.png}
			\end{figure}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}{Front End}
	\begin{itemize}
		\item Implemented Parser Recovery
		\item Rust-style Error Messages
	\end{itemize}

	\begin{figure}
		\centering
		\includegraphics{images/error_message.png}
	\end{figure}
\end{frame}

\begin{frame}{Middle End}
	\begin{columns}
		\begin{column}{0.4\linewidth}
			\begin{itemize}
				\item Sparse Conditional Constant Propagation
				\item Misc. Arithmetic Simplifications
				\item Loop Invariant Code Motion
				\item Common Subexpression Elimination
				\item Function Inlining
				\item Load/Store Optimization
			\end{itemize}%
		\end{column}

		\begin{column}{0.25\linewidth}
			\vspace{-3em}
			\begin{figure}
				\centering
				\includegraphics[scale=0.3]{images/optimization-before.png}
			\end{figure}
		\end{column}

		\begin{column}{0.3\linewidth}
			\begin{figure}
				\centering
				\includegraphics[scale=0.2]{images/optimization-after.png}
			\end{figure}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}{Back End - Overview}
	\begin{figure}
		\centering
		%\vspace{-10px}
		%\def\scale{0.7}
		\input{tikz/compiler-overview.tikz}
	\end{figure}
\end{frame}

\begin{frame}{Back End - LLIR}
	\framesubtitle{Low-Level Intermediate Representation}
	
	\begin{columns}
		\begin{column}{0.2\textwidth}
			\begin{itemize}
				\item Graph-based
				\item Nodes represent x86 instructions
			\end{itemize}
		\end{column}

		\begin{column}{0.5\textwidth}
			\vspace{-3em}
			\begin{figure}
				\centering
				\includegraphics[scale=0.3]{images/llir-example}
			\end{figure}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}{Back End - SIR}
	\framesubtitle{Scheduled Intermediate Representation}
	
	\begin{columns}
		\begin{column}{0.3\textwidth}
			\begin{itemize}
				\item Includes scheduling information
				\item Modified by peephole optimizer
			\end{itemize}
		\end{column}
	
		\begin{column}{0.5\textwidth}
			\begin{figure}
				\centering
				\includegraphics[scale=0.6]{images/sir-before-reg-alloc}
			\end{figure}
		\end{column}
	\end{columns}
	
\end{frame}

\begin{frame}{Back End - SIR}
	\framesubtitle{Scheduled Intermediate Representation}
	
	\begin{figure}
		\centering
		\includegraphics[scale=0.5]{images/sir-after-reg-alloc}
	\end{figure}
	
\end{frame}

\appendix
\beginbackup

\begin{frame}{References}
\printbibliography
\end{frame}


\backupend

\end{document}
